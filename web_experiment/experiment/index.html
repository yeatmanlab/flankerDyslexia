<!DOCTYPE html>
<html>
  <head>
    <title>Flanker Experiment</title>
    <meta charset="UTF-8">

  <script type="text/javascript" src="lib/vendors/jspsych-6.0.0/jspsych.js"></script>
  <link href="lib/vendors/jspsych-6.0.0/css/jspsych.css" rel="stylesheet" type="text/css" />

  <script type="text/javascript" src="lib/vendors/jspsych-6.0.0/plugins/jspsych-html-keyboard-response.js"></script>
  <script type="text/javascript" src="lib/vendors/jspsych-6.0.0/plugins/jspsych-image-keyboard-response.js"></script>
  <script type="text/javascript" src="lib/vendors/jspsych-6.0.0/plugins/jspsych-fullscreen.js"></script>
<script type="text/javascript" src="lib/vendors/jspsych-6.0.0/plugins/jspsych-audio-keyboard-response.js"></script>

<script type="text/javascript" src="lib/vendors/jspsych-6.0.0/plugins/jspsych-html-button-response.js"></script>
<script type="text/javascript" src="lib/vendors/jspsych-6.0.0/plugins/jspsych-survey-text.js"></script>
  <script type="text/javascript" src="lib/vendors/jquery-2.2.0.min.js"></script>
  <script type="text/javascript" src="lib/jspsych-pavlovia-3.0.6.js"></script>

  </head>
  <body></body>
  
<div class="hidden">
  <script type="text/javascript">

    var audio = ['sounds/coin_sound.mp3','sounds/fail_sound.mp3'];
    <!--//--><![CDATA[//><!--
      var BVSimages = new Array()
      function preloadBvS() {
        for (i = 0; i < preloadBvS.arguments.length; i++) {
          BVSimages[i] = new Image()
          BVSimages[i].src = preloadBvS.arguments[i]
        }
      }
      preloadBvS(
        "img/congruent_right_1.png",
        "img/congruent_right_2.png",
        "img/congruent_right_3.png", 
        "img/incongruent_right_1.png", 
        "img/incongruent_right_2.png", 
        "img/incongruent_right_3.png", 
        "img/congruent_left_1.png", 
        "img/congruent_left_2.png", 
        "img/congruent_left_3.png", 
        "img/incongruent_left_1.png", 
        "img/incongruent_left_2.png", 
        "img/incongruent_left_3.png", 
        "img/star_color.png", 
        "img/rocket_color.png", 
        "img/trophy_color.png", 
        "img/racecar_color.png", 
        "img/chick_color.png", 
        "img/whale_black.png", 
        "img/whale_color.png", 
        "img/trex_black.png",
        "img/trex_color.png", 
        "img/unicorn_black.png", 
        "img/unicorn_color.png", 
        "img/correct2.png", 
        "img/incorrect.png"
      )
    //--><!]]>
  </script>
</div>

<script>

  function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

var participant = getParameterByName('participant');


jsPsych.data.addProperties({
  subject: participant,
});

    /* create timeline */
    var timeline = [];

 /* init connection with pavlovia.org */
    var pavlovia_init = {
      type: "pavlovia",
      command: "init"
    };
    timeline.push(pavlovia_init);


var password = {
  type: 'survey-text',
  questions: [
    {prompt: "Password:"}, 
  ],
};

timeline.push(password)

var consent = {
    type: 'html-button-response',
    stimulus: "<p> <b>  STANFORD UNIVERSITY CONSENT FORM </b> </p>" +
  "<p> Stanford University Reading & Dyslexia Research Program: Behavioral Testing </p>" +

  "<p> <b> Principal Investigator: </b> Jason D. Yeatman <br> Assistant Professor <br> Graduate School of Education <br> School of Medicine, Division of Developmental Behavioral Pediatrics </p>" + 


  "<p> Contact: readingresearch@stanford.edu <br> https://dyslexia.stanford.edu/  </p>" +

  "<p> <b> PURPOSE OF THE STUDY </b> <br> Data collected through games in the web-browser will help researchers understand relationships between academic skills, reading proficiency, cognition, perception, and/or attitudes towards reading and school in individuals with a broad range of reading skills. </p>" +

  "<p> <b> STUDY PROCEDURES </b> <br> In this study, your child will be asked to complete computer tasks via a computer screen. Audio will be presented via headphones or speakers. </p>" +

  "<p> <b> PRIVACY AND DATA COLLECTION </b> <br> We will do our best to ensure your privacy. Data that is collected through this online experiment is stored separately from identifying information such as your name. For the sake of payment, sometimes we store an email address you provide, but this is stored separately from the responses that are recorded in the online experiment. Each participant is assigned a code and that is used rather than names. This is called “coded data” and we try to ensure that the identity of our research participants is kept confidential. Data collected as part of this study may be used for many years to help discover trends in the population and explore changes due to development and education. In addition, coded data may be shared online or with collaborators to allow for new and unforeseen discoveries. Researchers may choose to include coded data in publications to support findings, or they may choose to release coded data alongside findings for replicability. <br> We will collect button presses and their timestamps. This data will be stored on servers.  </p>" +

  "<p> <b> COMPENSATION </b> <br> We value your child’s participation in our study. Your child will receive a $5 gift card upon completion of this study. <br> For Tango gift cards paid through the Tango portal: Please note that the gift card system we use to pay participants is not affiliated with Stanford and we will need to input your name and email into this system to send you the electronic gift card payment. If you feel uncomfortable with this process, please let us know before signing the consent form. Depending on the study, we may be able to look into other forms of payment for you.      </p>" +

  "<p> <b> RISKS, STRESS, OR DISCOMFORT </b> <br> If there is any reason to believe your child is not safe to participate in any of the tasks, please contact us at readingresearch@stanford.edu. Some people may experience some physical discomfort or boredom due to being asked to sit for long periods. For computer tasks, some people may also experience dry eyes or eye fatigue. For some tasks that are untimed, breaks can be taken as needed during the session. </p>" +

"<p> <b> CONTACT INFORMATION </b> <br> If you have any additional questions or concerns about our research, feel free to email us at readingresearch@stanford.edu. We will be more than happy to help! <br> For general information regarding questions or concerns about your child’s rights as a research participant, please call 1-866-680-2906 to reach the Administrative Panel on Human Subjects in Medical Research, Stanford University </p>",
    choices: ['<p> I agree to participate in this research. <br> Participation in this research is voluntary, and I can stop at any time without penalty.' +
    ' I feel that I understand what I am getting into, and <br> I know I am free to leave the experiment at any time by simply closing the web browser. </p>'],
};  


var hippa = {
    type: 'html-button-response',
    stimulus: "<p> <b>  AUTHORIZATION TO USE YOUR HEALTH INFORMATION FOR RESEARCH PURPOSES </b> </p>" +
  

  "<p> Because information about your child’s health is personal and private, it generally cannot be used in this research study without your written authorization. If you sign this form, it will provide that authorization. The form is intended to inform you about how your child’s health information will be used or disclosed in the study.  Your child’s information will only be used in accordance with this authorization form and the informed consent form and as required or allowed by law. Please read it carefully before signing it.  . </p>" +

  "<p> <b> What is the purpose of this research study and how will my health information be utilized in the study? </b> <br> The purpose of the study is to, first, understand the factors that are important for learning to read and, second, examine neural and behavioral differences between individuals with dyslexia and typical readers. In addition, we aim to test the feasibility of reading intervention programs to see if these trainings improve reading and reading-related skills. Your child’s performance in this study may be compared to their family medical history, and early health history.  </p>" +

  "<p> <b> Do I have to sign this authorization form? </b> <br> You do not have to sign this authorization form.  But if you do not, your child will not be able to participate in this research study. Signing the form is not a condition for receiving any medical care outside the study.  </p>" +

  "<p> <b> If I sign, can I revoke it or withdraw from the research later? </b> <br> If you decide to participate, you are free to withdraw your authorization regarding the use and disclosure of your child’s health information (and to discontinue any other participation in the study) at any time.  After any revocation, your child’s health information will no longer be used or disclosed in the study, except to the extent that the law allows us to continue using your information (e.g., necessary to maintain integrity of research).  If you wish to revoke your authorization for the research use or disclosure of your child’s health information in this study, you must write to:<br> Jason D. Yeatman, PhD <br> Graduate School of Education <br> School of Medicine, Division of Developmental Behavioral Pediatrics <br> readingresearch@stanford.edu  </p>" +

  "<p> <b> What Personal Information Will Be Obtained, Used or Disclosed? </b> <br> Your child’s health information related to this study, may be used or disclosed in connection with this research study, including, but not limited to, descriptive data such as name, medical record number, age, birth date, gender, ethnicity, SES/family demographics, contact information; neural imaging studies, past and current therapies; eligibility criteria such as level of comprehension, blindness, deafness; and developmental testing, psychological testing, behavioral reports, or other assessments of functioning. </p>" +

"<p> <b> Who May Use or Disclose the Information? </b> <br> IThe following parties are authorized to use and/or disclose your child’s health information in connection with this research study:<br>  The Protocol Director, Jason D. Yeatman, PhD <br> The Stanford University Administrative Panel on Human Subjects in Medical Research and any other unit of Stanford University as necessary <br> Research Staff </p>" + 

"<p> <b> Who May Receive or Use the Information? </b> <br> The parties listed in the preceding paragraph may disclose your child’s health information to the following persons and organizations for their use in connection with this research study: <br>The Office for Human Research Protections in the U.S. Department of Health and Human Services <br> National Institutes of Health <p>" + 

"<p> Your child’s information may be re-disclosed by the recipients described above, if they are not required by law to protect the privacy of the information. <p>" + 
"<p> <b> When will my authorization expire? </b> <br> Your authorization for the use and/or disclosure of your child’s health information will end on December 31, 2035 or when the research project ends, whichever is earlier.  <p>",
    choices: ['<p> I have read the “Authorization to Use Your Health Information for Research Purposes” section, <br> and I agree to have the Stanford Reading & Dyslexia Research Program use my child’s information for this research study.<p>'],
};  

timeline.push(consent)
timeline.push(hippa)

var assent = {
    type: 'html-button-response',
    stimulus: "<p> <b>  STANFORD UNIVERSITY ASSENT FORM </b> </p>" +
  "<p> Stanford University Reading & Dyslexia Research Program: Behavioral Testing </p>" +

  "<p> <b> Principal Investigator: </b>  Jason D. Yeatman <br> Assistant Professor <br> Graduate School of Education <br> School of Medicine, Division of Developmental Behavioral Pediatrics </p>" +


  "<p> Contact: readingresearch@stanford.edu <br> https://dyslexia.stanford.edu/ </p>" +

 "<p> <b> Direction to Parents/Legal Guardian: <br> Please read this assent form over with your child before they start the study. Please ask them if they have any questions before starting. If they agree to participate, you may direct them to check the box below. <br> During the study, please stay near your child to read instructions and help clarify the activities before they begin. If they have a question that you cannot answer, you can email us at readingresearch@stanford.edu for additional clarifying answers. Please have them complete all tasks on their own without any help fromyou or others. </b> </p>" +

  "<p> <b> What will happen to me in this study? </b> <br> You are invited to participate in a research study about reading. You will be asked to play games that ask you simple questions about what you saw or heard. Sometimes we will ask you to perform an action (such as press a button) after you see or hear something. </p>" +

  "<p> A parent can help you understand the instructions for each activity if you are confused. Before you begin, you will have a chance to practice. Once the activity begins, work on your own without any help from your parents or anyone else. Just do the best you can! Sometimes it might be difficult, but that is okay. Your participation in this will take approximately 20 minutes. For activities that are not timed, feel free to take breaks in between activities.</p>" +

  "<p> <b> Can anything bad happen to me?  </b> <br> There are no anticipated risks associated with this study. </p>" +

"<p> <b> Can anything good happen to me?  </b> <br> The benefit is that you can help researchers learn about how kids learn to read. </p>" +

"<p> <b> Will anyone know I am in the study?  </b> <br> If you have any questions about the study or any problems with the study, your parent can help you email us at readingresearch@stanford.edu.</p>" +

"<p> <b> Who can I talk to about the study?  </b> <br> If you have any questions about the study or any problems with the study, your parent can help you email us at rdrp@uw.edu.</p>" +

"<p> If you have questions about the study but want to talk to someone else who is not a partof the study, your parent can help you call the Stanford Institutional Review Board (IRB) at (650)-723-5244 or toll free at 1-866-680-2906. </p>" +


"<p> <b> What if I do not want to do this?  </b> <br> You can stop your participation in the study at any time without getting in trouble. At any time, you are free to end the experiment by closing your browser window.  </p>",
    choices: ['<p> I agree to participate. I know that I can take breaks between activities. I also know that I can stop at any time without getting in trouble. </p>'],
};  

timeline.push(assent)


    /* define welcome message trial */
    var welcome = {
      type: "audio-keyboard-response",
      stimulus: 'sounds/welcome.m4a',
      prompt: "<p> Ready to play? Press any key to begin. </p>" +
    "<img src = img/star_color.png </img> <img src = img/rocket_color.png </img>" + 
    "<img src = img/trophy_color.png </img>"
    };
    timeline.push(welcome);

    /* define instructions trial */

  

    var instructions = {
    type: 'audio-keyboard-response',
    stimulus: 'sounds/instructions.m4a',
    prompt: "<div style='font-size: 20px;'>" +
      "<p> What direction is the middle arrow facing? </p>" +
      "<p> Ready to practice? Press any key!</p>" +
      "<p> Try to go as fast as you can! </p>" +
          "<div style='width: 900px;'>"+
          "<div style='font-size: 40px;'>" +
          "<div style='float: left;'><p> <<<strong><u><</u></strong><< </p> " +
          "<p style='float: left;'><p> >><strong><u><</strong></u>>> </p> " +
          "<p class='small'><strong>Press the left arrow</strong></p></div>" +
          "<div style='float: right;'><p> >><strong><u>></u></strong>>> </p>" +
          "<p style='float: right;'><p> <<<strong><u>></strong></u><< </p>" +
          "<p class='small'><strong>Press the right arrow</strong></p></div>" +
          "</div>" +
          "<img src= img/racecar_color.png </img>",
      choices: jsPsych.ALL_KEYS,
           post_trial_gap: 2000
};

  

    timeline.push(instructions);



    

    /* test trials */

    var test_stimuli = [
      { stimulus:'<img src=img/congruent_right_1.png </img>', data: { test_part: 'test', correct_response: 'rightarrow', congruency: 'congruent', spacing: 1} },
      { stimulus:'<img src=img/congruent_right_2.png </img>', data: { test_part: 'test', correct_response: 'rightarrow', congruency: 'congruent', spacing:2 } },
      { stimulus: '<img src=img/congruent_right_3.png </img>', data: { test_part: 'test', correct_response: 'rightarrow', congruency:'congruent', spacing:3 } },  
      { stimulus: '<img src=img/congruent_left_1.png </img>', data: { test_part: 'test', correct_response: 'leftarrow', congruency: 'congruent',spacing:1 } }, 
      { stimulus: '<img src=img/congruent_left_2.png </img>', data: { test_part: 'test', correct_response: 'leftarrow', congruency:'congruent',spacing:2 } }, 
      { stimulus: '<img src=img/congruent_left_3.png </img>', data: { test_part: 'test', correct_response: 'leftarrow', congruency:'congruent',spacing:3 } },
      { stimulus: '<img src=img/incongruent_right_1.png </img>', data: { test_part: 'test', correct_response: 'rightarrow', congruency:'incongruent',spacing:1 } },
      { stimulus: '<img src=img/incongruent_right_2.png </img>', data: { test_part: 'test', correct_response: 'rightarrow', congruency:'incongruent',spacing:2 } },
      { stimulus: '<img src=img/incongruent_right_3.png </img>', data: { test_part: 'test', correct_response: 'rightarrow', congruency:'incongruent',spacing:3 } },
      { stimulus: '<img src=img/incongruent_left_1.png </img>', data: { test_part: 'test', correct_response: 'leftarrow', congruency:'incongruent',spacing:1 } },
      { stimulus:'<img src=img/incongruent_left_2.png </img>', data: { test_part: 'test', correct_response: 'leftarrow', congruency:'incongruent',spacing:2 } },
      { stimulus: '<img src=img/incongruent_left_3.png </img>', data: { test_part: 'test', correct_response: 'leftarrow', congruency:'incongruent',spacing:3}}

    ];

    /* practice trials */

    var practice_stimuli = [
      { stimulus:'<img src=img/congruent_right_1.png </img>', data: { test_part: 'pratice', correct_response: 'rightarrow', congruency: 'congruent', spacing:1} },
      { stimulus:'<img src=img/congruent_right_2.png </img>', data: { test_part: 'pratice', correct_response: 'rightarrow', congruency: 'congruent', spacing:2 } },
      { stimulus: '<img src=img/congruent_right_3.png </img>', data: { test_part: 'pratice', correct_response: 'rightarrow', congruency:'congruent', spacing:3 } },  
      { stimulus: '<img src=img/congruent_left_1.png </img>', data: { test_part: 'pratice', correct_response: 'leftarrow', congruency: 'congruent',spacing:1 } }, 
      { stimulus: '<img src=img/congruent_left_2.png </img>', data: { test_part: 'pratice', correct_response: 'leftarrow', congruency:'congruent',spacing:2 } }, 
      { stimulus: '<img src=img/congruent_left_3.png </img>', data: { test_part: 'pratice', correct_response: 'leftarrow', congruency:'congruent',spacing:3 } },
      { stimulus: '<img src=img/incongruent_right_1.png </img>', data: { test_part: 'pratice', correct_response: 'rightarrow', congruency:'incongruent',spacing:1 } },
      { stimulus: '<img src=img/incongruent_right_2.png </img>', data: { test_part: 'pratice', correct_response: 'rightarrow', congruency:'incongruent',spacing:2 } },
      { stimulus: '<img src=img/incongruent_right_3.png </img>', data: { test_part: 'pratice', correct_response: 'rightarrow', congruency:'incongruent',spacing:3 } },
      { stimulus: '<img src=img/incongruent_left_1.png </img>', data: { test_part: 'pratice', correct_response: 'leftarrow', congruency:'incongruent',spacing:1 } },
      { stimulus:'<img src=img/incongruent_left_2.png </img>', data: { test_part: 'pratice', correct_response: 'leftarrow', congruency:'incongruent',spacing:2 } },
      { stimulus: '<img src=img/incongruent_left_3.png </img>', data: { test_part: 'pratice', correct_response: 'leftarrow', congruency:'incongruent',spacing:3}}

    ];


    var fixation = {
      type: 'html-keyboard-response',
      stimulus: '<div style="font-size:60px;">+</div>',
      choices: jsPsych.NO_KEYS,
      trial_duration: 1000,
      data: {test_part: 'fixation'}
    }

    var feedback = {
      type: "audio-keyboard-response",
      choices: jsPsych.NO_KEYS,
      trial_duration: 1000,
      stimulus: function(){
        var last_trial_correct = jsPsych.data.get().last(1).values()[0].correct;
        if(last_trial_correct){
          return "sounds/coin_sound.mp3";
        } else {
          return "sounds/fail_sound.mp3";
    }
  },
      prompt: function(){
        var last_trial_correct = jsPsych.data.get().last(1).values()[0].correct;
        if(last_trial_correct){
          return "<img src=img/correct2.png </img>";
        } else {
          return "<img src=img/incorrect.png </img>";
    }
  }
}



var practice_feedback = {
      type: "audio-keyboard-response",
      stimulus: function(){
        var last_trial_correct = jsPsych.data.get().last(1).values()[0].correct;
        if(last_trial_correct){
          return "sounds/coin_sound.mp3";
        } else {
          return "sounds/fail_sound.mp3";
    }
  },
       
      prompt: function(){
        var last_trial_correct = jsPsych.data.get().last(1).values()[0].correct;
        if(last_trial_correct){
          return "<img src=img/correct2.png </img>";
        } else {
          return "<img src=img/incorrect.png </img>";
    }
  },
  choices: jsPsych.NO_KEYS,
      trial_duration: 1000
}



    var test = {
      type: "html-keyboard-response",
      stimulus: jsPsych.timelineVariable('stimulus'),
      choices: ['leftarrow', 'rightarrow'],
      data: jsPsych.timelineVariable('data'),
      on_finish: function(data){
        data.correct = data.key_press == jsPsych.pluginAPI.convertKeyCharacterToKeyCode(data.correct_response);
      },
    }

    var break1 = {
      type: "audio-keyboard-response",
      stimulus: 'sounds/start_playing.m4a',
      prompt: "<p> Amazing job! </p>" + 
      "<img src=img/chick_black.png </img> <img src=img/whale_black.png </img>" +
      "<img src=img/trex_black.png </img> <img src=img/unicorn_black.png </img>" +
      "<p>Press space to play the game.</p>",
      post_trial_gap: 2000
    };

    var break2 = {
      type: "audio-keyboard-response",
      stimulus: 'sounds/break1.m4a',
      prompt: "<p> Great job! You are 25% done. </p>" + 
      "<img src=img/chick_color.png </img> <img src=img/whale_black.png </img>" +
      "<img src=img/trex_black.png </img> <img src=img/unicorn_black.png </img>" +
      "<p>Press space to continue.</p>",
      post_trial_gap: 2000
    };

    var break3 = {
      type: "audio-keyboard-response",
      stimulus: 'sounds/break2.m4a',
      prompt: "<p> Great job! You are 50% done. </p>" + 
      "<img src=img/chick_color.png </img> <img src=img/whale_color.png </img>" +
      "<img src=img/trex_black.png </img> <img src=img/unicorn_black.png </img>" +
      "<p>Press space to continue.</p>",
      post_trial_gap: 2000
    };

    var break4 = {
      type: "audio-keyboard-response",
      stimulus:'sounds/break3.m4a',
      prompt: "<p> Great job! You are 75% done. </p>" + 
      "<img src=img/chick_color.png </img> <img src=img/whale_color.png </img>" +
      "<img src=img/trex_color.png </img> <img src=img/unicorn_black.png </img>" +
      "<p>Press space to continue.</p>",
      post_trial_gap: 2000
    };

    var alldone= {
      type: "audio-keyboard-response",
      stimulus: 'sounds/all_done.m4a',
      prompt: "<p> Great job! You are all done! </p>" + 
      "<img src=img/chick_color.png </img> <img src=img/whale_color.png </img>" +
      "<img src=img/trex_color.png </img> <img src=img/unicorn_color.png </img>" +
      "<p>Press space to complete the experiment.<br>" +
      "<b> Please do not exit until the green message appears. <b> </p>",
      post_trial_gap: 2000
    };

    

    var practice_procedure = {
      timeline: [test, practice_feedback],
      timeline_variables: practice_stimuli,
      repetitions: 1,
      randomize_order: true
    }

    var test_procedure = {
      timeline: [test,feedback],
      timeline_variables: test_stimuli,
      repetitions: 5,
      randomize_order: true
    }
    timeline.push(practice_procedure)
    timeline.push(break1)
    timeline.push(test_procedure);
    timeline.push(break2)
    timeline.push(test_procedure)
    timeline.push(break3)
    timeline.push(test_procedure)
    timeline.push(break4)
    timeline.push(test_procedure)
    timeline.push(alldone)



  /* finish connection with pavlovia.org */
    var pavlovia_finish = {
      type: "pavlovia",
      command: "finish",
      participantId: participant
    };

    timeline.push(pavlovia_finish);

    var goodbye = {
      type: "html-button-response", 
      stimulus: "<div style='color: green'>" + 
      "<p> Thank you for your patience! </p> </div>", 
      choices: ["<p> Click here to be redirected to the Stanford Website. </p>"]
      };

          timeline.push(goodbye)


    /* define debrief */

    var debrief_block = {
      type: "html-keyboard-response",
      stimulus: function() {

        var trials = jsPsych.data.get().filter({test_part: 'test'});
        var correct_trials = trials.filter({correct: true});
        var accuracy = Math.round(correct_trials.count() / trials.count() * 100);
        var rt = Math.round(correct_trials.select('rt').mean());

        return "<p>You responded correctly on "+accuracy+"% of the trials.</p>"+
        "<p>Your average response time was "+rt+"ms.</p>"+
        "<p>Press any key to complete the experiment. Thank you!</p>";

      }
    };

    /* start the experiment */
    jsPsych.init({
      timeline: timeline,
      preload_audio: audio,
      on_finish: function() {window.location.replace("https://reading.stanford.edu/?g=100&c=1")
    }
        
    });
  </script>
</html>